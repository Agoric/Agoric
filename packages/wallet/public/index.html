<!DOCTYPE html>
<html>
  <head>
    <title>Agoric || Welcome aboard!</title>
    <link rel="icon" type="image/png" href="web-solo/images/touch/homescreen144.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Inter:600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Material+Icons&display=block" rel="stylesheet">
  </head>

  <body>
    <style>
      :root {
        --mdc-theme-primary: #BB2D40;
        --mdc-theme-on-primary: white;
      }

      html, body {
        margin: 0;
      }

      body {
        font-family: 'Roboto', sans-serif;
        font-weight: 400;
      }

      h1 {
        font-weight: 600;
      }

      .hdr {
        text-transform: uppercase;
      }

      .container {
        display: grid;
        grid-template-columns: 1fr auto 0.3fr 0.3fr 1fr 0.3fr 1fr;
        grid-template-rows: 0.5fr 0.4fr 0.3fr 0.2fr 60px;
        grid-template-areas:
          "intro intro intro intro intro intro intro"
          "dappClient dappClient border-right . cosmosClient cosmosClient cosmosClient"
          "ag-solo web-solo border-right . keplr . cosmos-helper"
          "agSoloInstall webSoloInstall border-right . keplrInstall . cosmosHelperInstall"
          ". . . . . . .";
        padding-left: 80px;
        padding-right: 80px;

        height: 100vh;
      }
      #intro {
        grid-area: intro;
        margin: auto;
        display: flex;
        flex-direction: column;
      }
      #intro > * {
        margin-right: auto;
        margin-left: auto;
      }
      #dappClient {
        grid-area: dappClient;
      }
      #cosmosClient {
        grid-area: cosmosClient;
      }
      #ag-solo {
        grid-area: ag-solo;
      }
      #keplr {
        grid-area: keplr;
      }
      #keplrInstall {
        grid-area: keplrInstall;
      }
      #agSoloInstall {
        grid-area: agSoloInstall;
      }
      #cosmosHelperInstall {
        grid-area: cosmosHelperInstall;
      }
      #cosmos-helper {
        grid-area: cosmos-helper;
      }
      #web-solo {
        grid-area: web-solo;
      }
      #webSoloInstall {
        grid-area: webSoloInstall;
      }

      .nodisplay {
        display: none;
      }

      .border-right {
        grid-area: border-right;
        margin-left: auto;
        border-right: solid 3px var(--mdc-theme-primary);
        height: 100%;
      }

      button {
        border: 0;
        border-radius: 0px;
        font-size: inherit;
      }

      a.button, button {
        display: inline-block;
        margin-right: auto;
        margin-bottom: auto;
        font-family: 'Inter', sans-serif;
        
        text-decoration: none;
        padding: 15px 20px;
        background-color: var(--mdc-theme-primary);
        color: var(--mdc-theme-on-primary);
      }

      a.button.nodisplay {
        display: none;
      }

      @media only screen and (max-width:950px) {
        .container {
          grid-template-columns: 1fr;
          grid-template-rows: auto;
          grid-template-areas:
            "intro"
            "dappClient"
            "ag-solo"
            "agSoloInstall"
            "web-solo"
            "webSoloInstall"
            "cosmosClient"
            "keplr"
            "keplrInstall"
            "cosmos-helper"
            "cosmosHelperInstall"
            "padding";
          padding: 20px;
        }

        .padding {
          height: 40px;
          grid-area: padding;
        }
      }

      .float-logo {
        position: absolute;
        top: 0px;
        left: 0px;
      }
    </style>

    <div class="float-logo"><a href="https://agoric.com"><img
    src="web-solo/images/touch/homescreen144.png" height="144" width="144"></a></div>

    <main class="container">
    
    <div id="intro">
    <h1>Agoric Wallets</h1>

    <p>Choose the wallet that best suits your needs.</p>
    </div>

    <div id="dappClient">
    <h4 class="hdr">Dapp Client Wallet</h4>

    <p>These wallets support offer-safe interaction with Agoric dapps.</p>
    </div>

    <div id="ag-solo">
      <h2>Ag-Solo</h2>

      <p>Docker-based</p>
    </div>

    <a class="button" id="agSoloInstall"
      href="https://agoric.com/documentation/getting-started/beta.html#set-up-a-wallet-agoric-solo-machine">Learn&nbsp;How</a>

    <div id="web-solo" class="experimental nodisplay">
      <h2>Web-Solo</h2>

      <p>Web Page</p>
    </div>

    <a class="nodisplay button experimental" id="webSoloInstall" href="web-solo/current/">Try&nbsp;It</a>

    <div class="border-right"></div>
    
    <div id="cosmosClient">
      <h4 class="hdr">Cosmos-Layer Wallet</h4>

      <p>These wallets enable trading for chain tokens including  RUN and BLD.
      To interact with Agoric dapps, you must use a Dapp Client wallet.
      </p>
    </div>

    <div id="keplr">
      <h2>Keplr</h2>
      <p>Chrome Extension</p>
    </div>

    <button id="keplrInstall">Install&nbsp;Wallet</button>

    <div id="cosmos-helper">
      <h2>Ag-Cosmos-Helper</h2>
      <p>Command-line</p>
    </div>
    <a id="cosmosHelperInstall" class="button"
      href="https://github.com/Agoric/agoric-sdb/wiki/Setting-up-an-Agoric-Dapp-Client-with-docker-compose#note-for-incentivized-testnet-participants">Learn&nbsp;How</a>

    <div class="padding"></div>
  </main>

  <mwc-dialog heading="Install Keplr" id="keplrModal">
    <div class="instructions nodisplay">You must first <a target="_blank"
    href="https://chrome.google.com/webstore/detail/keplr/dmkamcknogkgcdfhhbddcghachkejeap">install
    the Chrome extension</a> then come back to this page.

    If it is already installed, please enable it and reload this page.
    </div>
    
    <div class="network-config nodisplay">
      Choose the network to connect:
      <p>
      <mwc-select id="networks" fixedMenuPosition label="Network">
        <mwc-list-item selected value="https://testnet.agoric.net/network-config">Agoric Testnet</mwc-list-item>
        <mwc-list-item value="https://devnet.agoric.net/network-config">Agoric Devnet</mwc-list-item>
        <mwc-list-item value="https://stage.agoric.net/network-config">Agoric Stage</mwc-list-item>
      </mwc-select>
      <button id="chooseNetworkConfig">Configure</button>
      </p>
      <div id="keplr-status"></div>
    </div>
  </mwc-dialog>

    <script type="module">
      import '@agoric/wallet/components/install-ses-lockdown.js';
      import '@material/mwc-dialog';
      import '@material/mwc-select';
      import '@material/mwc-list/mwc-list-item';
      import { suggestChain } from '../src/use-keplr.js';

      if (window.location.hash.startsWith('#x')) {
        // Don't hide the experimental wallets.
        document.querySelectorAll('.experimental').forEach(el => el.classList.remove('nodisplay'));
      }

      window.addEventListener('load', async _ => {
        if (window.keplr && window.keplr.enable) {
          document.querySelector('#keplr-status').innerText = 'Keplr Detected';
          window.keplr.enable('agoric').finally(_ => {
            document.querySelectorAll('#keplrModal .network-config').forEach(el => el.classList.remove('nodisplay'));
            document.querySelector('#keplr-status').innerText = 'Keplr Enabled';
          });
          return;
        }
        document.querySelectorAll('#keplrModal .instructions').forEach(el => el.classList.remove('nodisplay'));
      });

      chooseNetworkConfig.addEventListener('click', async ev => {
        const nc = networks.value;
        document.querySelector('#keplr-status').innerText = 'Configuring Keplr...';
        try {
          await suggestChain(nc);
          document.querySelector('#keplr-status').innerText = `${networks.selected.text} configured`;
        } catch (e) {
          console.log(e);
          document.querySelector('#keplr-status').innerText = `${e}`;
        }
      });

      document.querySelector('#keplrInstall').addEventListener('click', ev => {
        ev.preventDefault();
        keplrModal.show();
      });
    </script>
  </body>
</html>
